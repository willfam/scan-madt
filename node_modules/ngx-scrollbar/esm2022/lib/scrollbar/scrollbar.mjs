import { ChangeDetectionStrategy, Component, effect, inject } from '@angular/core';
import { fromPromise } from 'rxjs/internal/observable/innerFrom';
import { TrackXDirective, TrackYDirective } from '../track/track';
import { ThumbXDirective, ThumbYDirective } from '../thumb/thumb';
import { SCROLLBAR_CONTROL, ScrollbarAdapter } from './scrollbar-adapter';
import { ScrollbarButton } from '../button/scrollbar-button.component';
import { ScrollbarManager } from '../utils/scrollbar-manager';
import * as i0 from "@angular/core";
export class ScrollbarY extends ScrollbarAdapter {
    constructor() {
        super(...arguments);
        this.clientRectProperty = 'top';
        this.sizeProperty = 'offsetHeight';
        this.clientProperty = 'clientY';
        this.offsetProperty = 'offsetY';
        this.axis = 'y';
    }
    get viewportScrollMax() {
        return this.cmp.viewport.scrollMaxY;
    }
    get viewportScrollOffset() {
        return this.cmp.viewport.scrollTop;
    }
    scrollTo(top, duration) {
        return fromPromise(this.cmp.scrollTo({ top, duration }));
    }
    instantScrollTo(value) {
        this.cmp.viewport.scrollYTo(value);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.1.2", ngImport: i0, type: ScrollbarY, deps: null, target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.1.2", type: ScrollbarY, isStandalone: true, selector: "scrollbar-y", providers: [
            { provide: SCROLLBAR_CONTROL, useExisting: ScrollbarY }
        ], usesInheritance: true, ngImport: i0, template: `
    <div class="ng-scrollbar-sticky"
         [class.ng-scrollbar-hover]="cmp.hoverOffset()">
      <div class="ng-scrollbar-track-wrapper"
           [class.ng-scrollbar-hover]="!cmp.hoverOffset()">
        <div scrollbarTrackY class="ng-scrollbar-track {{ cmp.trackClass }}">
          <div scrollbarThumbY class="ng-scrollbar-thumb {{ cmp.thumbClass }}"></div>
        </div>
        @if (cmp.buttons()) {
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="top"
                  scrollDirection="backward"></button>
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="bottom"
                  scrollDirection="forward"></button>
        }
      </div>
    </div>
  `, isInline: true, styles: [":host{position:absolute;inset:0;pointer-events:none;min-width:calc(var(--viewport-width) * 1px);min-height:calc(var(--viewport-height) * 1px)}.ng-scrollbar-sticky{top:calc(var(--_scrollbar-wrapper-top) * 1px);left:calc(var(--_scrollbar-wrapper-left) * 1px);right:calc(var(--_scrollbar-wrapper-right) * 1px);height:calc(var(--_scrollbar-wrapper-height) * 1px);width:calc(var(--_scrollbar-wrapper-width) * 1px);position:sticky;z-index:100;opacity:var(--_scrollbar-hover-opacity);transition:var(--_scrollbar-opacity-transition);pointer-events:var(--_scrollbar-pointer-events)}.ng-scrollbar-track-wrapper{touch-action:none;-webkit-user-select:none;user-select:none;top:var(--_scrollbar-track-top);bottom:var(--_scrollbar-track-bottom);right:var(--_scrollbar-track-right);left:var(--_scrollbar-track-left);transition:var(--INTERNAL-scrollbar-track-wrapper-transition);position:absolute;overflow:hidden;display:flex;place-items:center}.ng-scrollbar-track{position:relative;width:100%;height:100%;background-color:var(--INTERNAL-scrollbar-track-color);border-radius:var(--INTERNAL-scrollbar-border-radius);cursor:default;z-index:1;order:2}.ng-scrollbar-thumb{box-sizing:border-box;position:absolute;transition:var(--INTERNAL-scrollbar-thumb-transition);border-radius:var(--INTERNAL-scrollbar-border-radius);height:var(--_thumb-height);width:var(--_thumb-width);animation-name:scrollbarThumbAnimation;animation-duration:1ms;animation-timing-function:linear}@keyframes scrollbarThumbAnimation{0%{translate:var(--_scrollbar-thumb-transform-from)}to{translate:var(--_scrollbar-thumb-transform-to)}}\n", ":host{--_scrollbar-wrapper-top: 0;--_scrollbar-wrapper-left: var(--_scrollbar-wrapper-y-left);--_scrollbar-wrapper-right: var(--_scrollbar-wrapper-y-right);--_scrollbar-wrapper-height: var(--viewport-height);--_scrollbar-wrapper-width: var(--_scrollbar-thickness);--_scrollbar-track-top: var(--_vertical-top);--_scrollbar-track-bottom: var(--_vertical-bottom);--_scrollbar-track-right: var(--_vertical-right);--_scrollbar-track-left: var(--_vertical-left);--_thumb-height: calc(var(--thumb-y-length) * 1px);--_thumb-width: 100%;--_scrollbar-thumb-transform-from: 0 0;--_scrollbar-thumb-transform-to: 0 calc(var(--_scrollbar-y-thumb-transform-to-value) * 1px)}.ng-scrollbar-track-wrapper{width:var(--_track-y-thickness);flex-direction:column}.ng-scrollbar-hover:hover{--_track-y-thickness: var(--_scrollbar-hover-thickness-px);--_thumb-y-color: var(--INTERNAL-scrollbar-thumb-hover-color)}.ng-scrollbar-thumb{animation-timeline:var(--_animation-timeline-y);min-height:calc(var(--INTERNAL-scrollbar-thumb-min-size) * 1px);display:var(--_vertical-thumb-display);background-color:var(--_thumb-y-color)}\n"], dependencies: [{ kind: "directive", type: TrackYDirective, selector: "[scrollbarTrackY]" }, { kind: "directive", type: ThumbYDirective, selector: "[scrollbarThumbY]" }, { kind: "component", type: ScrollbarButton, selector: "button[scrollbarButton]", inputs: ["scrollbarButton", "scrollDirection"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.1.2", ngImport: i0, type: ScrollbarY, decorators: [{
            type: Component,
            args: [{ standalone: true, selector: 'scrollbar-y', template: `
    <div class="ng-scrollbar-sticky"
         [class.ng-scrollbar-hover]="cmp.hoverOffset()">
      <div class="ng-scrollbar-track-wrapper"
           [class.ng-scrollbar-hover]="!cmp.hoverOffset()">
        <div scrollbarTrackY class="ng-scrollbar-track {{ cmp.trackClass }}">
          <div scrollbarThumbY class="ng-scrollbar-thumb {{ cmp.thumbClass }}"></div>
        </div>
        @if (cmp.buttons()) {
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="top"
                  scrollDirection="backward"></button>
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="bottom"
                  scrollDirection="forward"></button>
        }
      </div>
    </div>
  `, imports: [TrackYDirective, ThumbYDirective, ScrollbarButton], providers: [
                        { provide: SCROLLBAR_CONTROL, useExisting: ScrollbarY }
                    ], changeDetection: ChangeDetectionStrategy.OnPush, styles: [":host{position:absolute;inset:0;pointer-events:none;min-width:calc(var(--viewport-width) * 1px);min-height:calc(var(--viewport-height) * 1px)}.ng-scrollbar-sticky{top:calc(var(--_scrollbar-wrapper-top) * 1px);left:calc(var(--_scrollbar-wrapper-left) * 1px);right:calc(var(--_scrollbar-wrapper-right) * 1px);height:calc(var(--_scrollbar-wrapper-height) * 1px);width:calc(var(--_scrollbar-wrapper-width) * 1px);position:sticky;z-index:100;opacity:var(--_scrollbar-hover-opacity);transition:var(--_scrollbar-opacity-transition);pointer-events:var(--_scrollbar-pointer-events)}.ng-scrollbar-track-wrapper{touch-action:none;-webkit-user-select:none;user-select:none;top:var(--_scrollbar-track-top);bottom:var(--_scrollbar-track-bottom);right:var(--_scrollbar-track-right);left:var(--_scrollbar-track-left);transition:var(--INTERNAL-scrollbar-track-wrapper-transition);position:absolute;overflow:hidden;display:flex;place-items:center}.ng-scrollbar-track{position:relative;width:100%;height:100%;background-color:var(--INTERNAL-scrollbar-track-color);border-radius:var(--INTERNAL-scrollbar-border-radius);cursor:default;z-index:1;order:2}.ng-scrollbar-thumb{box-sizing:border-box;position:absolute;transition:var(--INTERNAL-scrollbar-thumb-transition);border-radius:var(--INTERNAL-scrollbar-border-radius);height:var(--_thumb-height);width:var(--_thumb-width);animation-name:scrollbarThumbAnimation;animation-duration:1ms;animation-timing-function:linear}@keyframes scrollbarThumbAnimation{0%{translate:var(--_scrollbar-thumb-transform-from)}to{translate:var(--_scrollbar-thumb-transform-to)}}\n", ":host{--_scrollbar-wrapper-top: 0;--_scrollbar-wrapper-left: var(--_scrollbar-wrapper-y-left);--_scrollbar-wrapper-right: var(--_scrollbar-wrapper-y-right);--_scrollbar-wrapper-height: var(--viewport-height);--_scrollbar-wrapper-width: var(--_scrollbar-thickness);--_scrollbar-track-top: var(--_vertical-top);--_scrollbar-track-bottom: var(--_vertical-bottom);--_scrollbar-track-right: var(--_vertical-right);--_scrollbar-track-left: var(--_vertical-left);--_thumb-height: calc(var(--thumb-y-length) * 1px);--_thumb-width: 100%;--_scrollbar-thumb-transform-from: 0 0;--_scrollbar-thumb-transform-to: 0 calc(var(--_scrollbar-y-thumb-transform-to-value) * 1px)}.ng-scrollbar-track-wrapper{width:var(--_track-y-thickness);flex-direction:column}.ng-scrollbar-hover:hover{--_track-y-thickness: var(--_scrollbar-hover-thickness-px);--_thumb-y-color: var(--INTERNAL-scrollbar-thumb-hover-color)}.ng-scrollbar-thumb{animation-timeline:var(--_animation-timeline-y);min-height:calc(var(--INTERNAL-scrollbar-thumb-min-size) * 1px);display:var(--_vertical-thumb-display);background-color:var(--_thumb-y-color)}\n"] }]
        }] });
export class ScrollbarX extends ScrollbarAdapter {
    get viewportScrollMax() {
        return this.cmp.viewport.scrollMaxX;
    }
    get viewportScrollOffset() {
        // Keep scrollLeft value positive for horizontal scrollbar
        return Math.abs(this.cmp.viewport.scrollLeft);
    }
    constructor() {
        effect(() => {
            if (this.cmp.direction() === 'rtl') {
                this.handlePosition = (position, scrollMax) => -(scrollMax - position);
            }
            else {
                this.handlePosition = (position) => position;
            }
        });
        super();
        this.manager = inject(ScrollbarManager);
        this.clientRectProperty = 'left';
        this.sizeProperty = 'offsetWidth';
        this.clientProperty = 'clientX';
        this.offsetProperty = 'offsetX';
        this.axis = 'x';
    }
    scrollTo(left, duration) {
        return fromPromise(this.cmp.scrollTo({ left, duration }));
    }
    instantScrollTo(value, scrollMax) {
        this.cmp.viewport.scrollXTo(this.handlePosition(value, scrollMax));
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.1.2", ngImport: i0, type: ScrollbarX, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.1.2", type: ScrollbarX, isStandalone: true, selector: "scrollbar-x", host: { properties: { "attr.dir": "cmp.direction()" } }, providers: [
            { provide: SCROLLBAR_CONTROL, useExisting: ScrollbarX }
        ], usesInheritance: true, ngImport: i0, template: `
    <div class="ng-scrollbar-sticky"
         [class.ng-scrollbar-hover]="cmp.hoverOffset()">
      <div class="ng-scrollbar-track-wrapper"
           [class.ng-scrollbar-hover]="!cmp.hoverOffset()">
        <div scrollbarTrackX class="ng-scrollbar-track {{ cmp.trackClass }}">
          <div scrollbarThumbX class="ng-scrollbar-thumb {{ cmp.thumbClass }}"></div>
        </div>
        @if (cmp.buttons()) {
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="start"
                  scrollDirection="backward"></button>
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="end"
                  scrollDirection="forward"></button>
        }
      </div>
    </div>
  `, isInline: true, styles: [":host{position:absolute;inset:0;pointer-events:none;min-width:calc(var(--viewport-width) * 1px);min-height:calc(var(--viewport-height) * 1px)}.ng-scrollbar-sticky{top:calc(var(--_scrollbar-wrapper-top) * 1px);left:calc(var(--_scrollbar-wrapper-left) * 1px);right:calc(var(--_scrollbar-wrapper-right) * 1px);height:calc(var(--_scrollbar-wrapper-height) * 1px);width:calc(var(--_scrollbar-wrapper-width) * 1px);position:sticky;z-index:100;opacity:var(--_scrollbar-hover-opacity);transition:var(--_scrollbar-opacity-transition);pointer-events:var(--_scrollbar-pointer-events)}.ng-scrollbar-track-wrapper{touch-action:none;-webkit-user-select:none;user-select:none;top:var(--_scrollbar-track-top);bottom:var(--_scrollbar-track-bottom);right:var(--_scrollbar-track-right);left:var(--_scrollbar-track-left);transition:var(--INTERNAL-scrollbar-track-wrapper-transition);position:absolute;overflow:hidden;display:flex;place-items:center}.ng-scrollbar-track{position:relative;width:100%;height:100%;background-color:var(--INTERNAL-scrollbar-track-color);border-radius:var(--INTERNAL-scrollbar-border-radius);cursor:default;z-index:1;order:2}.ng-scrollbar-thumb{box-sizing:border-box;position:absolute;transition:var(--INTERNAL-scrollbar-thumb-transition);border-radius:var(--INTERNAL-scrollbar-border-radius);height:var(--_thumb-height);width:var(--_thumb-width);animation-name:scrollbarThumbAnimation;animation-duration:1ms;animation-timing-function:linear}@keyframes scrollbarThumbAnimation{0%{translate:var(--_scrollbar-thumb-transform-from)}to{translate:var(--_scrollbar-thumb-transform-to)}}\n", ":host{--_scrollbar-wrapper-top: var(--_scrollbar-wrapper-x-top);--_scrollbar-wrapper-left: 0;--_scrollbar-wrapper-right: 0;--_scrollbar-wrapper-height: var(--_scrollbar-thickness);--_scrollbar-wrapper-width: var(--viewport-width);--_scrollbar-track-top: var(--_horizontal-top);--_scrollbar-track-bottom: var(--_horizontal-bottom);--_scrollbar-track-right: var(--_horizontal-right);--_scrollbar-track-left: var(--_horizontal-left);--_thumb-height: 100%;--_thumb-width: calc(var(--thumb-x-length) * 1px);--_scrollbar-thumb-transform-from: 0;--_scrollbar-thumb-transform-to: calc(var(--_scrollbar-x-thumb-transform-to-value) * 1px)}:host .ng-scrollbar-button[scrollbarButton=start]{_--button-rotate:90}:host .ng-scrollbar-button[scrollbarButton=end]{_--button-rotate:-90}:host[dir=rtl] .ng-scrollbar-thumb{animation-name:scrollbarThumbRTLAnimation;will-change:right;--_scrollbar-thumb-transform-to: calc(var(--_scrollbar-x-thumb-transform-to-value) * -1px)}:host[dir=rtl] .ng-scrollbar-button[scrollbarButton=start]{--_button-rotate: 90deg}:host[dir=rtl] .ng-scrollbar-button[scrollbarButton=end]{--_button-rotate: -90deg}.ng-scrollbar-track-wrapper{height:var(--_track-x-thickness);flex-direction:row}.ng-scrollbar-hover:hover{--_track-x-thickness: var(--_scrollbar-hover-thickness-px);--_thumb-x-color: var(--INTERNAL-scrollbar-thumb-hover-color)}.ng-scrollbar-thumb{animation-timeline:var(--_animation-timeline-x);min-width:calc(var(--INTERNAL-scrollbar-thumb-min-size) * 1px);display:var(--_horizontal-thumb-display);background-color:var(--_thumb-x-color)}@keyframes scrollbarThumbRTLAnimation{0%{right:var(--_scrollbar-thumb-transform-from)}to{right:calc(var(--_scrollbar-thumb-transform-to) * -1)}}\n"], dependencies: [{ kind: "directive", type: TrackXDirective, selector: "[scrollbarTrackX]" }, { kind: "directive", type: ThumbXDirective, selector: "[scrollbarThumbX]" }, { kind: "component", type: ScrollbarButton, selector: "button[scrollbarButton]", inputs: ["scrollbarButton", "scrollDirection"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.1.2", ngImport: i0, type: ScrollbarX, decorators: [{
            type: Component,
            args: [{ standalone: true, selector: 'scrollbar-x', host: { '[attr.dir]': 'cmp.direction()' }, template: `
    <div class="ng-scrollbar-sticky"
         [class.ng-scrollbar-hover]="cmp.hoverOffset()">
      <div class="ng-scrollbar-track-wrapper"
           [class.ng-scrollbar-hover]="!cmp.hoverOffset()">
        <div scrollbarTrackX class="ng-scrollbar-track {{ cmp.trackClass }}">
          <div scrollbarThumbX class="ng-scrollbar-thumb {{ cmp.thumbClass }}"></div>
        </div>
        @if (cmp.buttons()) {
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="start"
                  scrollDirection="backward"></button>
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="end"
                  scrollDirection="forward"></button>
        }
      </div>
    </div>
  `, imports: [TrackXDirective, ThumbXDirective, ScrollbarButton], providers: [
                        { provide: SCROLLBAR_CONTROL, useExisting: ScrollbarX }
                    ], changeDetection: ChangeDetectionStrategy.OnPush, styles: [":host{position:absolute;inset:0;pointer-events:none;min-width:calc(var(--viewport-width) * 1px);min-height:calc(var(--viewport-height) * 1px)}.ng-scrollbar-sticky{top:calc(var(--_scrollbar-wrapper-top) * 1px);left:calc(var(--_scrollbar-wrapper-left) * 1px);right:calc(var(--_scrollbar-wrapper-right) * 1px);height:calc(var(--_scrollbar-wrapper-height) * 1px);width:calc(var(--_scrollbar-wrapper-width) * 1px);position:sticky;z-index:100;opacity:var(--_scrollbar-hover-opacity);transition:var(--_scrollbar-opacity-transition);pointer-events:var(--_scrollbar-pointer-events)}.ng-scrollbar-track-wrapper{touch-action:none;-webkit-user-select:none;user-select:none;top:var(--_scrollbar-track-top);bottom:var(--_scrollbar-track-bottom);right:var(--_scrollbar-track-right);left:var(--_scrollbar-track-left);transition:var(--INTERNAL-scrollbar-track-wrapper-transition);position:absolute;overflow:hidden;display:flex;place-items:center}.ng-scrollbar-track{position:relative;width:100%;height:100%;background-color:var(--INTERNAL-scrollbar-track-color);border-radius:var(--INTERNAL-scrollbar-border-radius);cursor:default;z-index:1;order:2}.ng-scrollbar-thumb{box-sizing:border-box;position:absolute;transition:var(--INTERNAL-scrollbar-thumb-transition);border-radius:var(--INTERNAL-scrollbar-border-radius);height:var(--_thumb-height);width:var(--_thumb-width);animation-name:scrollbarThumbAnimation;animation-duration:1ms;animation-timing-function:linear}@keyframes scrollbarThumbAnimation{0%{translate:var(--_scrollbar-thumb-transform-from)}to{translate:var(--_scrollbar-thumb-transform-to)}}\n", ":host{--_scrollbar-wrapper-top: var(--_scrollbar-wrapper-x-top);--_scrollbar-wrapper-left: 0;--_scrollbar-wrapper-right: 0;--_scrollbar-wrapper-height: var(--_scrollbar-thickness);--_scrollbar-wrapper-width: var(--viewport-width);--_scrollbar-track-top: var(--_horizontal-top);--_scrollbar-track-bottom: var(--_horizontal-bottom);--_scrollbar-track-right: var(--_horizontal-right);--_scrollbar-track-left: var(--_horizontal-left);--_thumb-height: 100%;--_thumb-width: calc(var(--thumb-x-length) * 1px);--_scrollbar-thumb-transform-from: 0;--_scrollbar-thumb-transform-to: calc(var(--_scrollbar-x-thumb-transform-to-value) * 1px)}:host .ng-scrollbar-button[scrollbarButton=start]{_--button-rotate:90}:host .ng-scrollbar-button[scrollbarButton=end]{_--button-rotate:-90}:host[dir=rtl] .ng-scrollbar-thumb{animation-name:scrollbarThumbRTLAnimation;will-change:right;--_scrollbar-thumb-transform-to: calc(var(--_scrollbar-x-thumb-transform-to-value) * -1px)}:host[dir=rtl] .ng-scrollbar-button[scrollbarButton=start]{--_button-rotate: 90deg}:host[dir=rtl] .ng-scrollbar-button[scrollbarButton=end]{--_button-rotate: -90deg}.ng-scrollbar-track-wrapper{height:var(--_track-x-thickness);flex-direction:row}.ng-scrollbar-hover:hover{--_track-x-thickness: var(--_scrollbar-hover-thickness-px);--_thumb-x-color: var(--INTERNAL-scrollbar-thumb-hover-color)}.ng-scrollbar-thumb{animation-timeline:var(--_animation-timeline-x);min-width:calc(var(--INTERNAL-scrollbar-thumb-min-size) * 1px);display:var(--_horizontal-thumb-display);background-color:var(--_thumb-x-color)}@keyframes scrollbarThumbRTLAnimation{0%{right:var(--_scrollbar-thumb-transform-from)}to{right:calc(var(--_scrollbar-thumb-transform-to) * -1)}}\n"] }]
        }], ctorParameters: () => [] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2Nyb2xsYmFyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LXNjcm9sbGJhci9zcmMvbGliL3Njcm9sbGJhci9zY3JvbGxiYXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRW5GLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUNqRSxPQUFPLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDbEUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDMUUsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDRCQUE0QixDQUFDOztBQStCOUQsTUFBTSxPQUFPLFVBQVcsU0FBUSxnQkFBZ0I7SUE3QmhEOztRQStCVyx1QkFBa0IsR0FBbUIsS0FBSyxDQUFDO1FBRTNDLGlCQUFZLEdBQW1DLGNBQWMsQ0FBQztRQUU5RCxtQkFBYyxHQUEwQixTQUFTLENBQUM7UUFFbEQsbUJBQWMsR0FBMEIsU0FBUyxDQUFDO1FBRWxELFNBQUksR0FBYyxHQUFHLENBQUM7S0FpQmhDO0lBZkMsSUFBSSxpQkFBaUI7UUFDbkIsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUM7SUFDdEMsQ0FBQztJQUVELElBQUksb0JBQW9CO1FBQ3RCLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO0lBQ3JDLENBQUM7SUFFRCxRQUFRLENBQUMsR0FBVyxFQUFFLFFBQWdC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WUFDL0I7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQWtCVCxXQUVRLENBQUMsZUFBZSxFQUFFLGVBQWUsRUFBRSxlQUFlLENBQUMsYUFDakQ7d0JBQ1QsRUFBRSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsV0FBVyxZQUFZLEVBQUU7cUJBQ3hELG1CQUNnQix1QkFBdUIsQ0FBQyxNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCwgZWZmZWN0LCBpbmplY3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBmcm9tUHJvbWlzZSB9IGZyb20gJ3J4anMvaW50ZXJuYWwvb2JzZXJ2YWJsZS9pbm5lckZyb20nO1xyXG5pbXBvcnQgeyBUcmFja1hEaXJlY3RpdmUsIFRyYWNrWURpcmVjdGl2ZSB9IGZyb20gJy4uL3RyYWNrL3RyYWNrJztcclxuaW1wb3J0IHsgVGh1bWJYRGlyZWN0aXZlLCBUaHVtYllEaXJlY3RpdmUgfSBmcm9tICcuLi90aHVtYi90aHVtYic7XHJcbmltcG9ydCB7IFNDUk9MTEJBUl9DT05UUk9MLCBTY3JvbGxiYXJBZGFwdGVyIH0gZnJvbSAnLi9zY3JvbGxiYXItYWRhcHRlcic7XHJcbmltcG9ydCB7IFNjcm9sbGJhckJ1dHRvbiB9IGZyb20gJy4uL2J1dHRvbi9zY3JvbGxiYXItYnV0dG9uLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFNjcm9sbGJhck1hbmFnZXIgfSBmcm9tICcuLi91dGlscy9zY3JvbGxiYXItbWFuYWdlcic7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzdGFuZGFsb25lOiB0cnVlLFxyXG4gIHNlbGVjdG9yOiAnc2Nyb2xsYmFyLXknLFxyXG4gIHRlbXBsYXRlOiBgXHJcbiAgICA8ZGl2IGNsYXNzPVwibmctc2Nyb2xsYmFyLXN0aWNreVwiXHJcbiAgICAgICAgIFtjbGFzcy5uZy1zY3JvbGxiYXItaG92ZXJdPVwiY21wLmhvdmVyT2Zmc2V0KClcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cIm5nLXNjcm9sbGJhci10cmFjay13cmFwcGVyXCJcclxuICAgICAgICAgICBbY2xhc3Mubmctc2Nyb2xsYmFyLWhvdmVyXT1cIiFjbXAuaG92ZXJPZmZzZXQoKVwiPlxyXG4gICAgICAgIDxkaXYgc2Nyb2xsYmFyVHJhY2tZIGNsYXNzPVwibmctc2Nyb2xsYmFyLXRyYWNrIHt7IGNtcC50cmFja0NsYXNzIH19XCI+XHJcbiAgICAgICAgICA8ZGl2IHNjcm9sbGJhclRodW1iWSBjbGFzcz1cIm5nLXNjcm9sbGJhci10aHVtYiB7eyBjbXAudGh1bWJDbGFzcyB9fVwiPjwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIEBpZiAoY21wLmJ1dHRvbnMoKSkge1xyXG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm5nLXNjcm9sbGJhci1idXR0b24ge3sgY21wLmJ1dHRvbkNsYXNzIH19XCJcclxuICAgICAgICAgICAgICAgICAgc2Nyb2xsYmFyQnV0dG9uPVwidG9wXCJcclxuICAgICAgICAgICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uPVwiYmFja3dhcmRcIj48L2J1dHRvbj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJuZy1zY3JvbGxiYXItYnV0dG9uIHt7IGNtcC5idXR0b25DbGFzcyB9fVwiXHJcbiAgICAgICAgICAgICAgICAgIHNjcm9sbGJhckJ1dHRvbj1cImJvdHRvbVwiXHJcbiAgICAgICAgICAgICAgICAgIHNjcm9sbERpcmVjdGlvbj1cImZvcndhcmRcIj48L2J1dHRvbj5cclxuICAgICAgICB9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgYCxcclxuICBzdHlsZVVybHM6IFsnLi9zaGFyZWQuc2NzcycsICcuL3ZlcnRpY2FsLnNjc3MnXSxcclxuICBpbXBvcnRzOiBbVHJhY2tZRGlyZWN0aXZlLCBUaHVtYllEaXJlY3RpdmUsIFNjcm9sbGJhckJ1dHRvbl0sXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICB7IHByb3ZpZGU6IFNDUk9MTEJBUl9DT05UUk9MLCB1c2VFeGlzdGluZzogU2Nyb2xsYmFyWSB9XHJcbiAgXSxcclxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxyXG59KVxyXG5leHBvcnQgY2xhc3MgU2Nyb2xsYmFyWSBleHRlbmRzIFNjcm9sbGJhckFkYXB0ZXIge1xyXG5cclxuICByZWFkb25seSBjbGllbnRSZWN0UHJvcGVydHk6ICdsZWZ0JyB8ICd0b3AnID0gJ3RvcCc7XHJcblxyXG4gIHJlYWRvbmx5IHNpemVQcm9wZXJ0eTogJ29mZnNldFdpZHRoJyB8ICdvZmZzZXRIZWlnaHQnID0gJ29mZnNldEhlaWdodCc7XHJcblxyXG4gIHJlYWRvbmx5IGNsaWVudFByb3BlcnR5OiAnY2xpZW50WCcgfCAnY2xpZW50WScgPSAnY2xpZW50WSc7XHJcblxyXG4gIHJlYWRvbmx5IG9mZnNldFByb3BlcnR5OiAnb2Zmc2V0WCcgfCAnb2Zmc2V0WScgPSAnb2Zmc2V0WSc7XHJcblxyXG4gIHJlYWRvbmx5IGF4aXM6ICd4JyB8ICd5JyA9ICd5JztcclxuXHJcbiAgZ2V0IHZpZXdwb3J0U2Nyb2xsTWF4KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5jbXAudmlld3BvcnQuc2Nyb2xsTWF4WTtcclxuICB9XHJcblxyXG4gIGdldCB2aWV3cG9ydFNjcm9sbE9mZnNldCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuY21wLnZpZXdwb3J0LnNjcm9sbFRvcDtcclxuICB9XHJcblxyXG4gIHNjcm9sbFRvKHRvcDogbnVtYmVyLCBkdXJhdGlvbjogbnVtYmVyKTogT2JzZXJ2YWJsZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gZnJvbVByb21pc2UodGhpcy5jbXAuc2Nyb2xsVG8oeyB0b3AsIGR1cmF0aW9uIH0pKTtcclxuICB9XHJcblxyXG4gIGluc3RhbnRTY3JvbGxUbyh2YWx1ZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLmNtcC52aWV3cG9ydC5zY3JvbGxZVG8odmFsdWUpO1xyXG4gIH1cclxufVxyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcclxuICBzZWxlY3RvcjogJ3Njcm9sbGJhci14JyxcclxuICBob3N0OiB7ICdbYXR0ci5kaXJdJzogJ2NtcC5kaXJlY3Rpb24oKScgfSxcclxuICB0ZW1wbGF0ZTogYFxyXG4gICAgPGRpdiBjbGFzcz1cIm5nLXNjcm9sbGJhci1zdGlja3lcIlxyXG4gICAgICAgICBbY2xhc3Mubmctc2Nyb2xsYmFyLWhvdmVyXT1cImNtcC5ob3Zlck9mZnNldCgpXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJuZy1zY3JvbGxiYXItdHJhY2std3JhcHBlclwiXHJcbiAgICAgICAgICAgW2NsYXNzLm5nLXNjcm9sbGJhci1ob3Zlcl09XCIhY21wLmhvdmVyT2Zmc2V0KClcIj5cclxuICAgICAgICA8ZGl2IHNjcm9sbGJhclRyYWNrWCBjbGFzcz1cIm5nLXNjcm9sbGJhci10cmFjayB7eyBjbXAudHJhY2tDbGFzcyB9fVwiPlxyXG4gICAgICAgICAgPGRpdiBzY3JvbGxiYXJUaHVtYlggY2xhc3M9XCJuZy1zY3JvbGxiYXItdGh1bWIge3sgY21wLnRodW1iQ2xhc3MgfX1cIj48L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBAaWYgKGNtcC5idXR0b25zKCkpIHtcclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJuZy1zY3JvbGxiYXItYnV0dG9uIHt7IGNtcC5idXR0b25DbGFzcyB9fVwiXHJcbiAgICAgICAgICAgICAgICAgIHNjcm9sbGJhckJ1dHRvbj1cInN0YXJ0XCJcclxuICAgICAgICAgICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uPVwiYmFja3dhcmRcIj48L2J1dHRvbj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJuZy1zY3JvbGxiYXItYnV0dG9uIHt7IGNtcC5idXR0b25DbGFzcyB9fVwiXHJcbiAgICAgICAgICAgICAgICAgIHNjcm9sbGJhckJ1dHRvbj1cImVuZFwiXHJcbiAgICAgICAgICAgICAgICAgIHNjcm9sbERpcmVjdGlvbj1cImZvcndhcmRcIj48L2J1dHRvbj5cclxuICAgICAgICB9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgYCxcclxuICBzdHlsZVVybHM6IFsnLi9zaGFyZWQuc2NzcycsICcuL2hvcml6b250YWwuc2NzcyddLFxyXG4gIGltcG9ydHM6IFtUcmFja1hEaXJlY3RpdmUsIFRodW1iWERpcmVjdGl2ZSwgU2Nyb2xsYmFyQnV0dG9uXSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgIHsgcHJvdmlkZTogU0NST0xMQkFSX0NPTlRST0wsIHVzZUV4aXN0aW5nOiBTY3JvbGxiYXJYIH1cclxuICBdLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBTY3JvbGxiYXJYIGV4dGVuZHMgU2Nyb2xsYmFyQWRhcHRlciB7XHJcblxyXG4gIHJlYWRvbmx5IG1hbmFnZXI6IFNjcm9sbGJhck1hbmFnZXIgPSBpbmplY3QoU2Nyb2xsYmFyTWFuYWdlcik7XHJcblxyXG4gIHJlYWRvbmx5IGNsaWVudFJlY3RQcm9wZXJ0eTogJ2xlZnQnIHwgJ3RvcCcgPSAnbGVmdCc7XHJcblxyXG4gIHJlYWRvbmx5IHNpemVQcm9wZXJ0eTogJ29mZnNldFdpZHRoJyB8ICdvZmZzZXRIZWlnaHQnID0gJ29mZnNldFdpZHRoJztcclxuXHJcbiAgcmVhZG9ubHkgY2xpZW50UHJvcGVydHk6ICdjbGllbnRYJyB8ICdjbGllbnRZJyA9ICdjbGllbnRYJztcclxuXHJcbiAgcmVhZG9ubHkgb2Zmc2V0UHJvcGVydHk6ICdvZmZzZXRYJyB8ICdvZmZzZXRZJyA9ICdvZmZzZXRYJztcclxuXHJcbiAgcmVhZG9ubHkgYXhpczogJ3gnIHwgJ3knID0gJ3gnO1xyXG5cclxuICAvLyBIYW5kbGUgZHJhZ2dpbmcgcG9zaXRpb24gKFN1cHBvcnQgTFRSIGFuZCBSVEwgZGlyZWN0aW9ucyBmb3IgdGhlIGhvcml6b250YWwgc2Nyb2xsYmFyKVxyXG4gIHByaXZhdGUgaGFuZGxlUG9zaXRpb246ICh2YWx1ZTogbnVtYmVyLCBzY3JvbGxNYXg6IG51bWJlcikgPT4gbnVtYmVyO1xyXG5cclxuICBnZXQgdmlld3BvcnRTY3JvbGxNYXgoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmNtcC52aWV3cG9ydC5zY3JvbGxNYXhYO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHZpZXdwb3J0U2Nyb2xsT2Zmc2V0KCk6IG51bWJlciB7XHJcbiAgICAvLyBLZWVwIHNjcm9sbExlZnQgdmFsdWUgcG9zaXRpdmUgZm9yIGhvcml6b250YWwgc2Nyb2xsYmFyXHJcbiAgICByZXR1cm4gTWF0aC5hYnModGhpcy5jbXAudmlld3BvcnQuc2Nyb2xsTGVmdCk7XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIGVmZmVjdCgoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmNtcC5kaXJlY3Rpb24oKSA9PT0gJ3J0bCcpIHtcclxuICAgICAgICB0aGlzLmhhbmRsZVBvc2l0aW9uID0gKHBvc2l0aW9uOiBudW1iZXIsIHNjcm9sbE1heDogbnVtYmVyKTogbnVtYmVyID0+IC0oc2Nyb2xsTWF4IC0gcG9zaXRpb24pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlUG9zaXRpb24gPSAocG9zaXRpb246IG51bWJlcik6IG51bWJlciA9PiBwb3NpdGlvbjtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBzdXBlcigpO1xyXG4gIH1cclxuXHJcbiAgc2Nyb2xsVG8obGVmdDogbnVtYmVyLCBkdXJhdGlvbjogbnVtYmVyKTogT2JzZXJ2YWJsZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gZnJvbVByb21pc2UodGhpcy5jbXAuc2Nyb2xsVG8oeyBsZWZ0LCBkdXJhdGlvbiB9KSk7XHJcbiAgfVxyXG5cclxuICBpbnN0YW50U2Nyb2xsVG8odmFsdWU6IG51bWJlciwgc2Nyb2xsTWF4PzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLmNtcC52aWV3cG9ydC5zY3JvbGxYVG8odGhpcy5oYW5kbGVQb3NpdGlvbih2YWx1ZSwgc2Nyb2xsTWF4KSk7XHJcbiAgfVxyXG59XHJcbiJdfQ==